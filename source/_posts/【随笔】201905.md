---
title: 【随笔】201905
date: 2019-05-08 17:36:36
tags:
- 随笔
- 201905
---

## 2019-05-08

```shell
1. linux下磁盘分区类型检测，mbr（55aa）和gpt（ee）， 
2. 新命令学习：hexdump、xxd、od
3. sg3_utils 是一个Linux的开发包，用来直接使用 SCSI 命令集访问设备。
4. Dockerfile编写熟悉
5. lvs使用nat和dr两种模式
6. 使用Linux自带的hexdump工具来从16进制的层面分析GPT分区表
然后我们用parted工具，将这sdb和sdc建立一个gpt分区表。
parted /dev/sdb mklabel gpt & parted /dev/sdc mklabel gpt
7. 组播：tcpdump -i ens160 -nn host 224.0.0.18
8. 读指定物理扇区：
dd  if=<源设备>  of=<输出设备或文件>   skip=<指定扇区值>  bs=512 count=1
写指定物理扇区：
dd   if=<输入设备或文件>   of=<输出设备>   seek=<指定扇区值>  bs=512 count=1

#lvs dr
modprobe ip_vs 
cat /proc/net/ip_vs
yum install ipvsadm -y
yum install net-tools -y
ifconfig ens33:0 192.168.23.199 broadcast 192.168.23.199 netmask 255.255.255.255 up
route add -host 192.168.23.199 dev ens33:0
ipvsadm -C
ipvsadm -A -t 192.168.23.199:80 -s rr
ipvsadm -a -t 192.168.23.199:80 -r 192.168.23.187:80 -g
ipvsadm -a -t 192.168.23.199:80 -r 192.168.23.190:80 -g
ipvsadm -Ln
yum install -y httpd
vi /etc/httpd/conf/httpd.conf
cd /var/www/html/
ll
echo "<h1>SERVER 192.168.23.187</h1>" > index.html
ll
service httpd start 
systemctl stop firewalld
ifconfig lo:0 192.168.23.199 broadcast 192.168.23.199 netmask 255.255.255.255 up
route add -host 192.168.23.199 dev lo:0
echo "1" >/proc/sys/net/ipv4/conf/lo/arp_ignore
echo "2" >/proc/sys/net/ipv4/conf/lo/arp_announce
echo "1" >/proc/sys/net/ipv4/conf/all/arp_ignore
echo "2" >/proc/sys/net/ipv4/conf/all/arp_announce
sysctl -p &>/dev/null
ip a

#lvs nat
echo 1 >/proc/sys/net/ipv4/ip_forward
echo 0 > /proc/sys/net/ipv4/conf/all/send_redirects
echo 0 > /proc/sys/net/ipv4/conf/default/send_redirects
echo 0 > /proc/sys/net/ipv4/conf/eth0/send_redirects
echo 0 > /proc/sys/net/ipv4/conf/eth1/send_redirects
ipvsadm -A -t 192.168.244.128:80 -s rr
ipvsadm -a -t 192.168.244.128:80 -r 192.168.137.133 -m -w 1
ipvsadm -a -t 192.168.244.128:80 -r 192.168.137.134 -m -w 2
service ipvsadm save
```

